{"ast":null,"code":"var _jsxFileName = \"/Users/careycosta/dev/darkreads/client/src/components/SearchHeader/SearchHeader.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { sortBy } from \"lodash\";\nimport { getBooks } from \"../repository\";\nimport styles from \"./SearchHeader.module.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  headerContainer,\n  inputWrapper,\n  searchButton\n} = styles;\nconst localStorageState = localStorage.getItem(\"searchState\");\nconst initialState = localStorageState ? JSON.parse(localStorageState) : null;\nconst sortBooks = (booksList, direction) => {\n  if (direction === \"ASC\") {\n    return sortBy(booksList, item => item.publishedDate);\n  } else {\n    return sortBy(booksList, item => item.publishedDate).reverse();\n  }\n};\nexport const SearchHeader = props => {\n  _s();\n  const {\n    handleSetBooks,\n    books\n  } = props;\n  const [searchState, setSearchState] = useState(initialState);\n  const [sortConfig, setSortConfig] = useState({\n    direction: \"ASC\"\n  });\n\n  // get books initially\n  useEffect(() => {\n    if (!searchState) {\n      return;\n    }\n    getBooks(searchState.title, searchState.author).then(response => handleSetBooks(response));\n  }, []);\n  useEffect(() => {\n    localStorage.setItem(\"searchState\", JSON.stringify(searchState));\n  }, [searchState]);\n\n  // when the sortDirection changes, update the book state\n  useEffect(() => {\n    handleSetBooks(sortBooks(books, sortConfig.direction));\n  }, [sortConfig.direction]);\n  const toggleSortDirection = () => {\n    if (sortConfig.direction === \"ASC\") {\n      setSortConfig(state => ({\n        ...state,\n        direction: \"DESC\"\n      }));\n    } else {\n      setSortConfig(state => ({\n        ...state,\n        direction: \"ASC\"\n      }));\n    }\n  };\n\n  // fetch books with current state parameters\n  const handleGetBooks = async () => {\n    const response = await getBooks(searchState.title, searchState.author);\n    handleSetBooks(sortBooks(response, sortConfig.direction));\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: headerContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"darkreads \\uD83D\\uDD77\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: inputWrapper,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"book title\",\n            onChange: e => setSearchState(state => ({\n              ...state,\n              title: e.target.value\n            })),\n            value: searchState === null || searchState === void 0 ? void 0 : searchState.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"author\",\n            onChange: e => setSearchState(state => ({\n              ...state,\n              author: e.target.value\n            })),\n            value: searchState === null || searchState === void 0 ? void 0 : searchState.author\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: searchButton,\n            onClick: handleGetBooks,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83D\\uDC80\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this), !!books.length && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: toggleSortDirection,\n            children: sortConfig.direction\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(SearchHeader, \"x0LspexQSJu8IPxadu60JeCxYj0=\");\n_c = SearchHeader;\nvar _c;\n$RefreshReg$(_c, \"SearchHeader\");","map":{"version":3,"names":["useEffect","useState","sortBy","getBooks","styles","jsxDEV","_jsxDEV","Fragment","_Fragment","headerContainer","inputWrapper","searchButton","localStorageState","localStorage","getItem","initialState","JSON","parse","sortBooks","booksList","direction","item","publishedDate","reverse","SearchHeader","props","_s","handleSetBooks","books","searchState","setSearchState","sortConfig","setSortConfig","title","author","then","response","setItem","stringify","toggleSortDirection","state","handleGetBooks","children","className","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","e","target","value","onClick","length","_c","$RefreshReg$"],"sources":["/Users/careycosta/dev/darkreads/client/src/components/SearchHeader/SearchHeader.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { sortBy } from \"lodash\";\nimport {\n  BookProps,\n  SearchStateProps,\n  SortConfigProps,\n  SearchHeaderProps,\n} from \"../types\";\nimport { getBooks } from \"../repository\";\n\nimport styles from \"./SearchHeader.module.scss\";\nconst { headerContainer, inputWrapper, searchButton } = styles;\n\nconst localStorageState = localStorage.getItem(\"searchState\");\nconst initialState = localStorageState ? JSON.parse(localStorageState) : null;\n\nconst sortBooks = (booksList: BookProps[], direction: string): BookProps[] => {\n  if (direction === \"ASC\") {\n    return sortBy(booksList, (item: BookProps) => item.publishedDate);\n  } else {\n    return sortBy(booksList, (item: BookProps) => item.publishedDate).reverse();\n  }\n};\n\nexport const SearchHeader = (props: SearchHeaderProps) => {\n  const { handleSetBooks, books } = props;\n\n  const [searchState, setSearchState] =\n    useState<SearchStateProps>(initialState);\n  const [sortConfig, setSortConfig] = useState<SortConfigProps>({\n    direction: \"ASC\",\n  });\n\n  // get books initially\n  useEffect(() => {\n    if (!searchState) {\n      return;\n    }\n    getBooks(searchState.title, searchState.author).then((response) =>\n      handleSetBooks(response)\n    );\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem(\"searchState\", JSON.stringify(searchState));\n  }, [searchState]);\n\n  // when the sortDirection changes, update the book state\n  useEffect(() => {\n    handleSetBooks(sortBooks(books, sortConfig.direction));\n  }, [sortConfig.direction]);\n\n  const toggleSortDirection = () => {\n    if (sortConfig.direction === \"ASC\") {\n      setSortConfig((state) => ({ ...state, direction: \"DESC\" }));\n    } else {\n      setSortConfig((state) => ({ ...state, direction: \"ASC\" }));\n    }\n  };\n\n  // fetch books with current state parameters\n  const handleGetBooks = async () => {\n    const response = await getBooks(searchState.title, searchState.author);\n    handleSetBooks(sortBooks(response, sortConfig.direction));\n  };\n\n  return (\n    <>\n      <div className={headerContainer}>\n        <h1>darkreads ðŸ•·</h1>\n        <div>\n          <div className={inputWrapper}>\n            <input\n              type=\"text\"\n              placeholder=\"book title\"\n              onChange={(e) =>\n                setSearchState((state) => ({ ...state, title: e.target.value }))\n              }\n              value={searchState?.title}\n            />\n            <input\n              type=\"text\"\n              placeholder=\"author\"\n              onChange={(e) =>\n                setSearchState((state) => ({\n                  ...state,\n                  author: e.target.value,\n                }))\n              }\n              value={searchState?.author}\n            />\n            <button className={searchButton} onClick={handleGetBooks}>\n              <span>ðŸ’€</span>\n            </button>\n            {!!books.length && (\n              <button onClick={toggleSortDirection}>\n                {sortConfig.direction}\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}