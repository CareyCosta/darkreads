{"ast":null,"code":"var _jsxFileName = \"/Users/careycosta/dev/darkreads/client/src/components/SearchHeader/SearchHeader.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { sortBy } from \"lodash\";\nimport { getBooks } from \"../repository\";\nimport styles from \"./SearchHeader.module.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  headerContainer,\n  inputWrapper,\n  searchButton\n} = styles;\nconst localStorageState = localStorage.getItem(\"searchState\");\nconst initialState = localStorageState ? JSON.parse(localStorageState) : {};\nconst sortBooks = (booksList, direction) => {\n  if (direction === \"ASC\") {\n    return sortBy(booksList, item => item.publishedDate);\n  } else {\n    return sortBy(booksList, item => item.publishedDate).reverse();\n  }\n};\nexport const SearchHeader = props => {\n  _s();\n  const {\n    handleSetBooks,\n    books\n  } = props;\n  const [searchState, setSearchState] = useState(initialState);\n  const [sortConfig, setSortConfig] = useState({\n    direction: \"ASC\"\n  });\n\n  // get books initially\n  useEffect(() => {\n    if (!Object.keys(searchState).length) {\n      return;\n    }\n    console.log(searchState);\n    getBooks(searchState).then(response => handleSetBooks(response));\n  }, []);\n  useEffect(() => {\n    localStorage.setItem(\"searchState\", JSON.stringify(searchState));\n  }, [searchState]);\n\n  // when the sortDirection changes, update the book state\n  useEffect(() => {\n    handleSetBooks(sortBooks(books, sortConfig.direction));\n  }, [sortConfig.direction]);\n  const toggleSortDirection = () => {\n    if (sortConfig.direction === \"ASC\") {\n      setSortConfig(state => ({\n        ...state,\n        direction: \"DESC\"\n      }));\n    } else {\n      setSortConfig(state => ({\n        ...state,\n        direction: \"ASC\"\n      }));\n    }\n  };\n\n  // fetch books with current state parameters\n  const handleGetBooks = async () => {\n    if (!Object.keys(searchState).length) {\n      return;\n    }\n    const response = await getBooks(searchState);\n    handleSetBooks(response, sortConfig.direction);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: headerContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"darkreads \\uD83D\\uDD77\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: inputWrapper,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"book title\",\n            onChange: e => setSearchState(state => ({\n              ...state,\n              title: e.target.value\n            })),\n            value: searchState === null || searchState === void 0 ? void 0 : searchState.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"author\",\n            onChange: e => setSearchState(state => ({\n              ...state,\n              author: e.target.value\n            })),\n            value: searchState === null || searchState === void 0 ? void 0 : searchState.author\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: searchButton,\n            onClick: handleGetBooks,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83D\\uDC80\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this), !!books.length && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: toggleSortDirection,\n            children: sortConfig.direction\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(SearchHeader, \"x0LspexQSJu8IPxadu60JeCxYj0=\");\n_c = SearchHeader;\nvar _c;\n$RefreshReg$(_c, \"SearchHeader\");","map":{"version":3,"names":["useEffect","useState","sortBy","getBooks","styles","jsxDEV","_jsxDEV","Fragment","_Fragment","headerContainer","inputWrapper","searchButton","localStorageState","localStorage","getItem","initialState","JSON","parse","sortBooks","booksList","direction","item","publishedDate","reverse","SearchHeader","props","_s","handleSetBooks","books","searchState","setSearchState","sortConfig","setSortConfig","Object","keys","length","console","log","then","response","setItem","stringify","toggleSortDirection","state","handleGetBooks","children","className","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","e","title","target","value","author","onClick","_c","$RefreshReg$"],"sources":["/Users/careycosta/dev/darkreads/client/src/components/SearchHeader/SearchHeader.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { sortBy } from \"lodash\";\nimport {\n  BookProps,\n  SearchStateProps,\n  SortConfigProps,\n  SearchHeaderProps,\n} from \"../types\";\nimport { getBooks } from \"../repository\";\n\nimport styles from \"./SearchHeader.module.scss\";\nconst { headerContainer, inputWrapper, searchButton } = styles;\n\nconst localStorageState = localStorage.getItem(\"searchState\");\nconst initialState = localStorageState ? JSON.parse(localStorageState) : {};\n\nconst sortBooks = (booksList: BookProps[], direction: string): BookProps[] => {\n  if (direction === \"ASC\") {\n    return sortBy(booksList, (item: BookProps) => item.publishedDate);\n  } else {\n    return sortBy(booksList, (item: BookProps) => item.publishedDate).reverse();\n  }\n};\n\nexport const SearchHeader = (props: SearchHeaderProps) => {\n  const { handleSetBooks, books } = props;\n\n  const [searchState, setSearchState] =\n    useState<SearchStateProps>(initialState);\n\n  const [sortConfig, setSortConfig] = useState<SortConfigProps>({\n    direction: \"ASC\",\n  });\n\n  // get books initially\n  useEffect(() => {\n    if (!Object.keys(searchState).length) {\n      return;\n    }\n    console.log(searchState);\n    getBooks(searchState).then((response) => handleSetBooks(response));\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem(\"searchState\", JSON.stringify(searchState));\n  }, [searchState]);\n\n  // when the sortDirection changes, update the book state\n  useEffect(() => {\n    handleSetBooks(sortBooks(books, sortConfig.direction));\n  }, [sortConfig.direction]);\n\n  const toggleSortDirection = () => {\n    if (sortConfig.direction === \"ASC\") {\n      setSortConfig((state) => ({ ...state, direction: \"DESC\" }));\n    } else {\n      setSortConfig((state) => ({ ...state, direction: \"ASC\" }));\n    }\n  };\n\n  // fetch books with current state parameters\n  const handleGetBooks = async () => {\n    if (!Object.keys(searchState).length) {\n      return;\n    }\n    const response = await getBooks(searchState);\n    handleSetBooks(response, sortConfig.direction);\n  };\n\n  return (\n    <>\n      <div className={headerContainer}>\n        <h1>darkreads ðŸ•·</h1>\n        <div>\n          <div className={inputWrapper}>\n            <input\n              type=\"text\"\n              placeholder=\"book title\"\n              onChange={(e) =>\n                setSearchState((state) => ({ ...state, title: e.target.value }))\n              }\n              value={searchState?.title}\n            />\n            <input\n              type=\"text\"\n              placeholder=\"author\"\n              onChange={(e) =>\n                setSearchState((state) => ({\n                  ...state,\n                  author: e.target.value,\n                }))\n              }\n              value={searchState?.author}\n            />\n            <button className={searchButton} onClick={handleGetBooks}>\n              <span>ðŸ’€</span>\n            </button>\n            {!!books.length && (\n              <button onClick={toggleSortDirection}>\n                {sortConfig.direction}\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}